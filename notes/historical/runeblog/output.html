<html>
  <head><link rel="stylesheet" href="github.css"></head>
  <body>
  <div class="highlight">
<span class="nb">require</span> <span class="s1">'rouge'</span>

<span class="n">lines</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">readlines</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">lines</span><span class="p">.</span><span class="nf">join</span>

<span class="n">formatter</span> <span class="o">=</span> <span class="no">Rouge</span><span class="o">::</span><span class="no">Formatters</span><span class="o">::</span><span class="no">HTML</span><span class="p">.</span><span class="nf">new</span>
<span class="n">lexer</span> <span class="o">=</span> <span class="no">Rouge</span><span class="o">::</span><span class="no">Lexers</span><span class="o">::</span><span class="no">Ruby</span><span class="p">.</span><span class="nf">new</span>

<span class="n">css</span> <span class="o">=</span> <span class="no">Rouge</span><span class="o">::</span><span class="no">Themes</span><span class="o">::</span><span class="no">Github</span><span class="p">.</span><span class="nf">render</span><span class="p">(</span><span class="ss">scope: </span><span class="s1">'.highlight'</span><span class="p">)</span>
<span class="n">added</span> <span class="o">=</span> <span class="s2">".highlight { font-family: courier; white-space: pre }"</span>
<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"github.css"</span><span class="p">,</span> <span class="n">css</span> <span class="o">+</span> <span class="n">added</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">formatter</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">lexer</span><span class="p">.</span><span class="nf">lex</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>

<span class="n">html_file</span> <span class="o">=</span> <span class="s2">"output.html"</span>
<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">output</span><span class="o">|</span>
  <span class="n">output</span><span class="p">.</span><span class="nf">puts</span> <span class="o">&lt;&lt;~</span><span class="no">HTML</span><span class="sh">
    &lt;html&gt;
      &lt;head&gt;&lt;link rel="stylesheet" href="github.css"&gt;&lt;/head&gt;
      &lt;body&gt;
      &lt;div class="highlight"&gt;
</span><span class="si">#{</span><span class="n">body</span><span class="si">}</span><span class="sh">
      &lt;/div&gt;
      &lt;/body&gt;
    &lt;/html&gt;
</span><span class="no">  HTML</span>
<span class="k">end</span>

  </div>
  </body>
</html>
