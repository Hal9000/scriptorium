Puma starting in single mode...
* Puma version: 6.6.0 ("Return to Forever")
* Ruby ver2025-08-03 20:54:28 - NoMethodError - undefined method `escape_javascript' for #<ScriptoriumWeb:0x000000010cc5f0a0 @default_layout=:layout, @preferred_extension="erb", @app=nil, @template_cache=#<Sinatra::TemplateCache:0x000000010cb945f8 @cache={[:erb, :edit_pages, {:outvar=>"@_out_buf", :default_encoding=>"utf-8"}, "/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views"]=>#<Tilt::ERBTemplate:0x000000010cc5aa50 @options={:outvar=>"@_out_buf"}, @line=1, @file="/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views/edit_pages.erb", @scope_class=nil, @default_encoding="utf-8", @skip_compiled_encoding_detection=nil, @data="<!DOCTYPE html>\n<html>\n<head>\n    <title>Edit Pages - Scriptorium</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .header {\n            background: #007bff;\n            color: white;\n            padding: 20px;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 24px;\n        }\n        .content {\n            padding: 20px;\n        }\n        .message {\n            padding: 10px;\n            border-radius: 4px;\n            margin-bottom: 20px;\n        }\n        .message.success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n        .message.error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n        .pages-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n            gap: 15px;\n            margin-bottom: 20px;\n        }\n        .page-card {\n            border: 1px solid #ddd;\n            border-radius: 6px;\n            padding: 15px;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        .page-card:hover {\n            border-color: #007bff;\n            box-shadow: 0 2px 8px rgba(0,123,255,0.2);\n        }\n        .page-card.empty {\n            font-weight: bold;\n            background: #fff3cd;\n            border-color: #ffeaa7;\n        }\n        .page-filename {\n            font-size: 14px;\n            margin-bottom: 8px;\n            word-break: break-all;\n        }\n        .page-preview {\n            font-size: 12px;\n            color: #666;\n            max-height: 60px;\n            overflow: hidden;\n            white-space: pre-wrap;\n        }\n        .page-card.empty .page-preview {\n            color: #856404;\n            font-style: italic;\n        }\n        .edit-form {\n            display: none;\n            margin-top: 20px;\n            padding: 20px;\n            background: #f8f9fa;\n            border-radius: 6px;\n            border: 1px solid #ddd;\n        }\n        .edit-form.active {\n            display: block;\n        }\n        .edit-form textarea {\n            width: 100%;\n            min-height: 300px;\n            font-family: monospace;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            resize: vertical;\n        }\n        .edit-form .buttons {\n            margin-top: 15px;\n        }\n        .btn {\n            padding: 8px 16px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n            margin-right: 10px;\n        }\n        .btn-primary {\n            background: #007bff;\n            color: white;\n        }\n        .btn-primary:hover {\n            background: #0056b3;\n        }\n        .btn-secondary {\n            background: #6c757d;\n            color: white;\n        }\n        .btn-secondary:hover {\n            background: #545b62;\n        }\n        .button-group {\n            margin-top: 20px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Edit Pages</h1>\n            <p>View: <strong><%= @current_view.name %></strong></p>\n        </div>\n        \n        <div class=\"content\">\n            <% if params[:message] %>\n                <div class=\"message success\">\n                    <%= params[:message] %>\n                </div>\n            <% end %>\n            \n            <% if params[:error] %>\n                <div class=\"message error\">\n                    <%= params[:error] %>\n                </div>\n            <% end %>\n            \n            <% if @pages.empty? %>\n                <p style=\"color: #666; font-style: italic;\">No pages found in this view.</p>\n            <% else %>\n                <h3>Pages (<%= @pages.length %>)</h3>\n                <div class=\"pages-grid\">\n                    <% @pages.each do |page| %>\n                        <div class=\"page-card <%= 'empty' if page[:empty] %>\" onclick=\"editPage('<%= page[:filename] %>', `<%= escape_javascript(page[:content]) %>`)\">\n                            <div class=\"page-filename\"><%= page[:filename] %></div>\n                            <div class=\"page-preview\">\n                                <% if page[:empty] %>\n                                    (empty file)\n                                <% else %>\n                                    <%= page[:content].lines.first&.strip || '(no content)' %>\n                                <% end %>\n                            </div>\n                        </div>\n                    <% end %>\n                </div>\n                \n                <div id=\"edit-form\" class=\"edit-form\">\n                    <h4 id=\"edit-filename\"></h4>\n                    <form method=\"post\" action=\"/edit_pages/save\">\n                        <input type=\"hidden\" name=\"filename\" id=\"edit-filename-input\">\n                        <textarea name=\"content\" id=\"edit-content\" placeholder=\"Enter page content...\"></textarea>\n                        <div class=\"buttons\">\n                            <button type=\"submit\" class=\"btn btn-primary\">Save Page</button>\n                            <button type=\"button\" class=\"btn btn-secondary\" onclick=\"hideEditForm()\">Cancel</button>\n                        </div>\n                    </form>\n                </div>\n            <% end %>\n            \n            <div class=\"button-group\">\n                <a href=\"/navbar_config\" class=\"btn btn-secondary\">Navbar Config</a>\n                <a href=\"/\" class=\"btn btn-secondary\">Back to Dashboard</a>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        function editPage(filename, content) {\n            document.getElementById('edit-filename').textContent = filename;\n            document.getElementById('edit-filename-input').value = filename;\n            document.getElementById('edit-content').value = content;\n            document.getElementById('edit-form').classList.add('active');\n            \n            // Scroll to edit form\n            document.getElementById('edit-form').scrollIntoView({ behavior: 'smooth' });\n        }\n        \n        function hideEditForm() {\n            document.getElementById('edit-form').classList.remove('active');\n        }\n    </script>\n</body>\n</html> ", @fixed_locals=nil, @freeze_string_literals=false, @outvar="@_out_buf", @engine=#<ERB:0x000000010cc5aa00 @src="#coding:UTF-8\n@_out_buf = +''; @_out_buf.<< \"<!DOCTYPE html>\\n\".freeze\n; @_out_buf.<< \"<html>\\n\".freeze\n; @_out_buf.<< \"<head>\\n\".freeze\n; @_out_buf.<< \"    <title>Edit Pages - Scriptorium</title>\\n\".freeze\n; @_out_buf.<< \"    <style>\\n\".freeze\n; @_out_buf.<< \"        body {\\n\".freeze\n; @_out_buf.<< \"            font-family: Arial, sans-serif;\\n\".freeze\n; @_out_buf.<< \"            margin: 0;\\n\".freeze\n; @_out_buf.<< \"            padding: 20px;\\n\".freeze\n; @_out_buf.<< \"            background-color: #f5f5f5;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .container {\\n\".freeze\n; @_out_buf.<< \"            max-width: 1200px;\\n\".freeze\n; @_out_buf.<< \"            margin: 0 auto;\\n\".freeze\n; @_out_buf.<< \"            background: white;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 8px;\\n\".freeze\n; @_out_buf.<< \"            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\n\".freeze\n; @_out_buf.<< \"            overflow: hidden;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .header {\\n\".freeze\n; @_out_buf.<< \"            background: #007bff;\\n\".freeze\n; @_out_buf.<< \"            color: white;\\n\".freeze\n; @_out_buf.<< \"            padding: 20px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .header h1 {\\n\".freeze\n; @_out_buf.<< \"            margin: 0;\\n\".freeze\n; @_out_buf.<< \"            font-size: 24px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .content {\\n\".freeze\n; @_out_buf.<< \"            padding: 20px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .message {\\n\".freeze\n; @_out_buf.<< \"            padding: 10px;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 4px;\\n\".freeze\n; @_out_buf.<< \"            margin-bottom: 20px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .message.success {\\n\".freeze\n; @_out_buf.<< \"            background: #d4edda;\\n\".freeze\n; @_out_buf.<< \"            color: #155724;\\n\".freeze\n; @_out_buf.<< \"            border: 1px solid #c3e6cb;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .message.error {\\n\".freeze\n; @_out_buf.<< \"            background: #f8d7da;\\n\".freeze\n; @_out_buf.<< \"            color: #721c24;\\n\".freeze\n; @_out_buf.<< \"            border: 1px solid #f5c6cb;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .pages-grid {\\n\".freeze\n; @_out_buf.<< \"            display: grid;\\n\".freeze\n; @_out_buf.<< \"            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\\n\".freeze\n; @_out_buf.<< \"            gap: 15px;\\n\".freeze\n; @_out_buf.<< \"            margin-bottom: 20px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-card {\\n\".freeze\n; @_out_buf.<< \"            border: 1px solid #ddd;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 6px;\\n\".freeze\n; @_out_buf.<< \"            padding: 15px;\\n\".freeze\n; @_out_buf.<< \"            cursor: pointer;\\n\".freeze\n; @_out_buf.<< \"            transition: all 0.2s;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-card:hover {\\n\".freeze\n; @_out_buf.<< \"            border-color: #007bff;\\n\".freeze\n; @_out_buf.<< \"            box-shadow: 0 2px 8px rgba(0,123,255,0.2);\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-card.empty {\\n\".freeze\n; @_out_buf.<< \"            font-weight: bold;\\n\".freeze\n; @_out_buf.<< \"            background: #fff3cd;\\n\".freeze\n; @_out_buf.<< \"            border-color: #ffeaa7;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-filename {\\n\".freeze\n; @_out_buf.<< \"            font-size: 14px;\\n\".freeze\n; @_out_buf.<< \"            margin-bottom: 8px;\\n\".freeze\n; @_out_buf.<< \"            word-break: break-all;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-preview {\\n\".freeze\n; @_out_buf.<< \"            font-size: 12px;\\n\".freeze\n; @_out_buf.<< \"            color: #666;\\n\".freeze\n; @_out_buf.<< \"            max-height: 60px;\\n\".freeze\n; @_out_buf.<< \"            overflow: hidden;\\n\".freeze\n; @_out_buf.<< \"            white-space: pre-wrap;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .page-card.empty .page-preview {\\n\".freeze\n; @_out_buf.<< \"            color: #856404;\\n\".freeze\n; @_out_buf.<< \"            font-style: italic;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .edit-form {\\n\".freeze\n; @_out_buf.<< \"            display: none;\\n\".freeze\n; @_out_buf.<< \"            margin-top: 20px;\\n\".freeze\n; @_out_buf.<< \"            padding: 20px;\\n\".freeze\n; @_out_buf.<< \"            background: #f8f9fa;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 6px;\\n\".freeze\n; @_out_buf.<< \"            border: 1px solid #ddd;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .edit-form.active {\\n\".freeze\n; @_out_buf.<< \"            display: block;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .edit-form textarea {\\n\".freeze\n; @_out_buf.<< \"            width: 100%;\\n\".freeze\n; @_out_buf.<< \"            min-height: 300px;\\n\".freeze\n; @_out_buf.<< \"            font-family: monospace;\\n\".freeze\n; @_out_buf.<< \"            padding: 10px;\\n\".freeze\n; @_out_buf.<< \"            border: 1px solid #ddd;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 4px;\\n\".freeze\n; @_out_buf.<< \"            resize: vertical;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .edit-form .buttons {\\n\".freeze\n; @_out_buf.<< \"            margin-top: 15px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .btn {\\n\".freeze\n; @_out_buf.<< \"            padding: 8px 16px;\\n\".freeze\n; @_out_buf.<< \"            border: none;\\n\".freeze\n; @_out_buf.<< \"            border-radius: 4px;\\n\".freeze\n; @_out_buf.<< \"            cursor: pointer;\\n\".freeze\n; @_out_buf.<< \"            font-size: 14px;\\n\".freeze\n; @_out_buf.<< \"            margin-right: 10px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .btn-primary {\\n\".freeze\n; @_out_buf.<< \"            background: #007bff;\\n\".freeze\n; @_out_buf.<< \"            color: white;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .btn-primary:hover {\\n\".freeze\n; @_out_buf.<< \"            background: #0056b3;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .btn-secondary {\\n\".freeze\n; @_out_buf.<< \"            background: #6c757d;\\n\".freeze\n; @_out_buf.<< \"            color: white;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .btn-secondary:hover {\\n\".freeze\n; @_out_buf.<< \"            background: #545b62;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        .button-group {\\n\".freeze\n; @_out_buf.<< \"            margin-top: 20px;\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"    </style>\\n\".freeze\n; @_out_buf.<< \"</head>\\n\".freeze\n; @_out_buf.<< \"<body>\\n\".freeze\n; @_out_buf.<< \"    <div class=\\\"container\\\">\\n\".freeze\n; @_out_buf.<< \"        <div class=\\\"header\\\">\\n\".freeze\n; @_out_buf.<< \"            <h1>Edit Pages</h1>\\n\".freeze\n; @_out_buf.<< \"            <p>View: <strong>\".freeze; @_out_buf.<<(( @current_view.name ).to_s); @_out_buf.<< \"</strong></p>\\n\".freeze\n; @_out_buf.<< \"        </div>\\n\".freeze\n; @_out_buf.<< \"        \\n\".freeze\n; @_out_buf.<< \"        <div class=\\\"content\\\">\\n\".freeze\n; @_out_buf.<< \"            \".freeze;  if params[:message] ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                <div class=\\\"message success\\\">\\n\".freeze\n; @_out_buf.<< \"                    \".freeze; @_out_buf.<<(( params[:message] ).to_s); @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                </div>\\n\".freeze\n; @_out_buf.<< \"            \".freeze;  end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"            \\n\".freeze\n; @_out_buf.<< \"            \".freeze;  if params[:error] ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                <div class=\\\"message error\\\">\\n\".freeze\n; @_out_buf.<< \"                    \".freeze; @_out_buf.<<(( params[:error] ).to_s); @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                </div>\\n\".freeze\n; @_out_buf.<< \"            \".freeze;  end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"            \\n\".freeze\n; @_out_buf.<< \"            \".freeze;  if @pages.empty? ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                <p style=\\\"color: #666; font-style: italic;\\\">No pages found in this view.</p>\\n\".freeze\n; @_out_buf.<< \"            \".freeze;  else ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                <h3>Pages (\".freeze; @_out_buf.<<(( @pages.length ).to_s); @_out_buf.<< \")</h3>\\n\".freeze\n; @_out_buf.<< \"                <div class=\\\"pages-grid\\\">\\n\".freeze\n; @_out_buf.<< \"                    \".freeze;  @pages.each do |page| ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                        <div class=\\\"page-card \".freeze; @_out_buf.<<(( 'empty' if page[:empty] ).to_s); @_out_buf.<< \"\\\" onclick=\\\"editPage('\".freeze; @_out_buf.<<(( page[:filename] ).to_s); @_out_buf.<< \"', `\".freeze; @_out_buf.<<(( escape_javascript(page[:content]) ).to_s); @_out_buf.<< \"`)\\\">\\n\".freeze\n; @_out_buf.<< \"                            <div class=\\\"page-filename\\\">\".freeze; @_out_buf.<<(( page[:filename] ).to_s); @_out_buf.<< \"</div>\\n\".freeze\n; @_out_buf.<< \"                            <div class=\\\"page-preview\\\">\\n\".freeze\n; @_out_buf.<< \"                                \".freeze;  if page[:empty] ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                                    (empty file)\\n\".freeze\n; @_out_buf.<< \"                                \".freeze;  else ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                                    \".freeze; @_out_buf.<<(( page[:content].lines.first&.strip || '(no content)' ).to_s); @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                                \".freeze;  end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                            </div>\\n\".freeze\n; @_out_buf.<< \"                        </div>\\n\".freeze\n; @_out_buf.<< \"                    \".freeze;  end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"                </div>\\n\".freeze\n; @_out_buf.<< \"                \\n\".freeze\n; @_out_buf.<< \"                <div id=\\\"edit-form\\\" class=\\\"edit-form\\\">\\n\".freeze\n; @_out_buf.<< \"                    <h4 id=\\\"edit-filename\\\"></h4>\\n\".freeze\n; @_out_buf.<< \"                    <form method=\\\"post\\\" action=\\\"/edit_pages/save\\\">\\n\".freeze\n; @_out_buf.<< \"                        <input type=\\\"hidden\\\" name=\\\"filename\\\" id=\\\"edit-filename-input\\\">\\n\".freeze\n; @_out_buf.<< \"                        <textarea name=\\\"content\\\" id=\\\"edit-content\\\" placeholder=\\\"Enter page content...\\\"></textarea>\\n\".freeze\n; @_out_buf.<< \"                        <div class=\\\"buttons\\\">\\n\".freeze\n; @_out_buf.<< \"                            <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Save Page</button>\\n\".freeze\n; @_out_buf.<< \"                            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" onclick=\\\"hideEditForm()\\\">Cancel</button>\\n\".freeze\n; @_out_buf.<< \"                        </div>\\n\".freeze\n; @_out_buf.<< \"                    </form>\\n\".freeze\n; @_out_buf.<< \"                </div>\\n\".freeze\n; @_out_buf.<< \"            \".freeze;  end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"            \\n\".freeze\n; @_out_buf.<< \"            <div class=\\\"button-group\\\">\\n\".freeze\n; @_out_buf.<< \"                <a href=\\\"/navbar_config\\\" class=\\\"btn btn-secondary\\\">Navbar Config</a>\\n\".freeze\n; @_out_buf.<< \"                <a href=\\\"/\\\" class=\\\"btn btn-secondary\\\">Back to Dashboard</a>\\n\".freeze\n; @_out_buf.<< \"            </div>\\n\".freeze\n; @_out_buf.<< \"        </div>\\n\".freeze\n; @_out_buf.<< \"    </div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"    <script>\\n\".freeze\n; @_out_buf.<< \"        function editPage(filename, content) {\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-filename').textContent = filename;\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-filename-input').value = filename;\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-content').value = content;\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-form').classList.add('active');\\n\".freeze\n; @_out_buf.<< \"            \\n\".freeze\n; @_out_buf.<< \"            // Scroll to edit form\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-form').scrollIntoView({ behavior: 'smooth' });\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"        \\n\".freeze\n; @_out_buf.<< \"        function hideEditForm() {\\n\".freeze\n; @_out_buf.<< \"            document.getElementById('edit-form').classList.remove('active');\\n\".freeze\n; @_out_buf.<< \"        }\\n\".freeze\n; @_out_buf.<< \"    </script>\\n\".freeze\n; @_out_buf.<< \"</body>\\n\".freeze\n; @_out_buf.<< \"</html> \".freeze; @_out_buf", @encoding=#<Encoding:UTF-8>, @frozen_string=nil, @filename=nil, @lineno=0, @_init=#<Class:ERB>>, @compiled_method={[ScriptoriumWeb, []]=>#<UnboundMethod: Tilt::CompiledTemplates#__tilt_1280(locals) /Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views/edit_pages.erb:-6>}>}>, @pinned_response=false, @env={"rack.version"=>[1, 6], "rack.errors"=>#<IO:<STDERR>>, "rack.multithread"=>true, "rack.multiprocess"=>false, "rack.run_once"=>false, "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"", "QUERY_STRING"=>"", "SERVER_SOFTWARE"=>"puma 6.6.0 Return to Forever", "GATEWAY_INTERFACE"=>"CGI/1.2", "REQUEST_METHOD"=>"GET", "REQUEST_PATH"=>"/edit_pages", "REQUEST_URI"=>"/edit_pages", "SERVER_PROTOCOL"=>"HTTP/1.1", "HTTP_HOST"=>"127.0.0.1:4567", "HTTP_CONNECTION"=>"keep-alive", "HTTP_SEC_CH_UA"=>"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"", "HTTP_SEC_CH_UA_MOBILE"=>"?0", "HTTP_SEC_CH_UA_PLATFORM"=>"\"macOS\"", "HTTP_UPGRADE_INSECURE_REQUESTS"=>"1", "HTTP_USER_AGENT"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36", "HTTP_ACCEPT"=>"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "HTTP_SEC_FETCH_SITE"=>"none", "HTTP_SEC_FETCH_MODE"=>"navigate", "HTTP_SEC_FETCH_USER"=>"?1", "HTTP_SEC_FETCH_DEST"=>"document", "HTTP_ACCEPT_ENCODING"=>"gzip, deflate, br, zstd", "HTTP_ACCEPT_LANGUAGE"=>"en-US,en;q=0.9", "puma.request_body_wait"=>0.007999986410140991, "SERVER_NAME"=>"127.0.0.1", "SERVER_PORT"=>"4567", "PATH_INFO"=>"/edit_pages", "REMOTE_ADDR"=>"127.0.0.1", "HTTP_VERSION"=>"HTTP/1.1", "puma.socket"=>#<TCPSocket:fd 20, AF_INET, 127.0.0.1, 4567>, "rack.hijack?"=>true, "rack.hijack"=>#<Puma::Client:0x514 @ready=true>, "rack.input"=>#<Puma::NullIO:0x000000010cb1eb28>, "rack.after_reply"=>[], "puma.config"=>#<Puma::Configuration:0x000000010c6302d8 @options=#<Puma::UserFileDefaultOptions:0x000000010cb79410 @user_options={:Port=>4567, :Host=>"0.0.0.0", :binds=>["tcp://0.0.0.0:4567"], :app=>ScriptoriumWeb, :log_writer=>#<Puma::LogWriter:0x000000010c630288 @formatter=#<Puma::LogWriter::DefaultFormatter:0x000000010cb784c0>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x000000010cb78470 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @file_options={}, @default_options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"web", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :Verbose=>false, :Silent=>false, :events=>#<Puma::Events:0x000000010cb79730 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}>, @plugins=#<Puma::PluginLoader:0x000000010cb79348 @instances=[]>, @user_dsl=#<Puma::DSL:0x000000010cb79258 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={:Port=>4567, :Host=>"0.0.0.0", :binds=>["tcp://0.0.0.0:4567"], :app=>ScriptoriumWeb, :log_writer=>#<Puma::LogWriter:0x000000010c630288 @formatter=#<Puma::LogWriter::DefaultFormatter:0x000000010cb784c0>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x000000010cb78470 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @plugins=[]>, @file_dsl=#<Puma::DSL:0x000000010cb79190 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={}, @plugins=[]>, @default_dsl=#<Puma::DSL:0x000000010cb790f0 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"web", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :Verbose=>false, :Silent=>false, :events=>#<Puma::Events:0x000000010cb79730 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}, @plugins=[]>, @puma_bundler_pruned=false>, "rack.logger"=>#<Logger:0x000000010cabbf00 @level=4, @progname=nil, @default_formatter=#<Logger::Formatter:0x000000010cabbd48 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000010cc5fe10 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDERR>>, @binmode=false, @reraise_write_errors=[], @skip_header=false, @mon_data=#<Monitor:0x000000010cabbaa0>, @mon_data_owner_object_id=1240>, @level_override={}>, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "rack.request.form_input"=>#<Puma::NullIO:0x000000010cb1eb28>, "rack.request.form_hash"=>{}, "sinatra.route"=>"GET /edit_pages", "sinatra.error.params"=>{}, "sinatra.error"=>#<NoMethodError: undefined method `escape_javascript' for #<ScriptoriumWeb:0x000000010cc5f0a0 ...>>}, @params={}, @request=#<Sinatra::Request:0x000000010cab8e68 @env={"rack.version"=>[1, 6], "rack.errors"=>#<IO:<STDERR>>, "rack.multithread"=>true, "rack.multiprocess"=>false, "rack.run_once"=>false, "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"", "QUERY_STRING"=>"", "SERVER_SOFTWARE"=>"puma 6.6.0 Return to Forever", "GATEWAY_INTERFACE"=>"CGI/1.2", "REQUEST_METHOD"=>"GET", "REQUEST_PATH"=>"/edit_pages", "REQUEST_URI"=>"/edit_pages", "SERVER_PROTOCOL"=>"HTTP/1.1", "HTTP_HOST"=>"127.0.0.1:4567", "HTTP_CONNECTION"=>"keep-alive", "HTTP_SEC_CH_UA"=>"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"", "HTTP_SEC_CH_UA_MOBILE"=>"?0", "HTTP_SEC_CH_UA_PLATFORM"=>"\"macOS\"", "HTTP_UPGRADE_INSECURE_REQUESTS"=>"1", "HTTP_USER_AGENT"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36", "HTTP_ACCEPT"=>"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "HTTP_SEC_FETCH_SITE"=>"none", "HTTP_SEC_FETCH_MODE"=>"navigate", "HTTP_SEC_FETCH_USER"=>"?1", "HTTP_SEC_FETCH_DEST"=>"document", "HTTP_ACCEPT_ENCODING"=>"gzip, deflate, br, zstd", "HTTP_ACCEPT_LANGUAGE"=>"en-US,en;q=0.9", "puma.request_body_wait"=>0.007999986410140991, "SERVER_NAME"=>"127.0.0.1", "SERVER_PORT"=>"4567", "PATH_INFO"=>"/edit_pages", "REMOTE_ADDR"=>"127.0.0.1", "HTTP_VERSION"=>"HTTP/1.1", "puma.socket"=>#<TCPSocket:fd 20, AF_INET, 127.0.0.1, 4567>, "rack.hijack?"=>true, "rack.hijack"=>#<Puma::Client:0x514 @ready=true>, "rack.input"=>#<Puma::NullIO:0x000000010cb1eb28>, "rack.after_reply"=>[], "puma.config"=>#<Puma::Configuration:0x000000010c6302d8 @options=#<Puma::UserFileDefaultOptions:0x000000010cb79410 @user_options={:Port=>4567, :Host=>"0.0.0.0", :binds=>["tcp://0.0.0.0:4567"], :app=>ScriptoriumWeb, :log_writer=>#<Puma::LogWriter:0x000000010c630288 @formatter=#<Puma::LogWriter::DefaultFormatter:0x000000010cb784c0>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x000000010cb78470 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @file_options={}, @default_options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"web", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :Verbose=>false, :Silent=>false, :events=>#<Puma::Events:0x000000010cb79730 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}>, @plugins=#<Puma::PluginLoader:0x000000010cb79348 @instances=[]>, @user_dsl=#<Puma::DSL:0x000000010cb79258 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={:Port=>4567, :Host=>"0.0.0.0", :binds=>["tcp://0.0.0.0:4567"], :app=>ScriptoriumWeb, :log_writer=>#<Puma::LogWriter:0x000000010c630288 @formatter=#<Puma::LogWriter::DefaultFormatter:0x000000010cb784c0>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x000000010cb78470 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @plugins=[]>, @file_dsl=#<Puma::DSL:0x000000010cb79190 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={}, @plugins=[]>, @default_dsl=#<Puma::DSL:0x000000010cb790f0 @config=#<Puma::Configuration:0x000000010c6302d8 ...>, @options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"web", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :Verbose=>false, :Silent=>false, :events=>#<Puma::Events:0x000000010cb79730 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}, @plugins=[]>, @puma_bundler_pruned=false>, "rack.logger"=>#<Logger:0x000000010cabbf00 @level=4, @progname=nil, @default_formatter=#<Logger::Formatter:0x000000010cabbd48 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000010cc5fe10 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDERR>>, @binmode=false, @reraise_write_errors=[], @skip_header=false, @mon_data=#<Monitor:0x000000010cabbaa0>, @mon_data_owner_object_id=1240>, @level_override={}>, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "rack.request.form_input"=>#<Puma::NullIO:0x000000010cb1eb28>, "rack.request.form_hash"=>{}, "sinatra.route"=>"GET /edit_pages", "sinatra.error.params"=>{}, "sinatra.error"=>#<NoMethodError: undefined method `escape_javascript' for #<ScriptoriumWeb:0x000000010cc5f0a0 ...>>}, @params={}>, @response=#<Sinatra::Response:0x000000010cc5f050 @status=500, @headers={}, @writer=#<Method: Sinatra::Response(Rack::Response::Helpers)#append(chunk) /Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-3.1.16/lib/rack/response.rb:359>, @block=nil, @body=[], @buffered=true, @length=nil>, @api=#<Scriptorium::API:0x000000010cab6a00 @testing=false, @repo=#<Scriptorium::Repo:0x000000010cab67f8 @root="/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/../scriptorium-TEST", @predef=#<Scriptorium::StandardFiles:0x000000010cab6758>, @views=[<View: sample "My first view" theme: standard>, <View: mystuff "A place for my stuff" theme: standard>], @current_view=<View: sample "My first view" theme: standard>, @reddit=nil>>, @current_view=<View: sample "My first view" theme: standard>, @pages=[{:filename=>"about.lt3", :content=>"", :empty=>true}], @_out_buf=nil>:
	Did you mean?  escape_path
	/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views/edit_pages.erb:161:in `block in __tilt_1280'
	/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views/edit_pages.erb:160:in `each'
	/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/views/edit_pages.erb:160:in `__tilt_1280'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/tilt-2.6.0/lib/tilt/template.rb:394:in `bind_call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/tilt-2.6.0/lib/tilt/template.rb:394:in `evaluate_method'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/tilt-2.6.0/lib/tilt/template.rb:266:in `evaluate'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/tilt-2.6.0/lib/tilt/template.rb:134:in `render'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:874:in `render'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:756:in `erb'
	app/app.rb:766:in `block in <class:ScriptoriumWeb>'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `block in compile!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1074:in `block (3 levels) in route!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1092:in `route_eval'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1074:in `block (2 levels) in route!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1123:in `block in process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1072:in `block in route!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1069:in `each'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1069:in `route!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1193:in `block in dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1188:in `dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `block in call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:993:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/xss_header.rb:20:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/path_traversal.rb:18:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/json_csrf.rb:28:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/frame_options.rb:33:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/middleware/logger.rb:17:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-3.1.16/lib/rack/head.rb:15:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:227:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:2138:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `block in call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1898:in `synchronize'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/configuration.rb:279:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:99:in `block in handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:390:in `with_force_shutdown'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:98:in `handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:472:in `process_client'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:254:in `block in run'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:167:in `block in spawn_thread'
2025-08-04 17:18:49 - CannotReadFileNotFound - Cannot read file /Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/../scriptorium-TEST/views/sample/config.txt: file not found (No such file or directory @ rb_sysopen - /Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/../scriptorium-TEST/views/sample/config.txt) (CannotReadFileNotFound):
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:176:in `rescue in read_file'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:160:in `read_file'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:22:in `getvars'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:203:in `open_view'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `block in load_views'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `each'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `load_views'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:83:in `initialize'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:65:in `new'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:65:in `open'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/api.rb:23:in `open_repo'
	/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/app.rb:36:in `block in <class:ScriptoriumWeb>'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `block in compile!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1123:in `block in process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1060:in `block in filter!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1059:in `each'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1059:in `filter!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1190:in `block in dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1188:in `dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `block in call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:993:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/xss_header.rb:20:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/path_traversal.rb:18:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/json_csrf.rb:28:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/frame_options.rb:33:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/middleware/logger.rb:17:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-3.1.16/lib/rack/head.rb:15:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:227:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:2138:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `block in call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1898:in `synchronize'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/configuration.rb:279:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:99:in `block in handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:390:in `with_force_shutdown'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:98:in `handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:472:in `process_client'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:254:in `block in run'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:167:in `block in spawn_thread'
2025-08-04 17:18:53 - CannotReadFileNotFound - Cannot read file /Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/../scriptorium-TEST/views/sample/config.txt: file not found (No such file or directory @ rb_sysopen - /Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/../scriptorium-TEST/views/sample/config.txt) (CannotReadFileNotFound):
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:176:in `rescue in read_file'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:160:in `read_file'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/helpers.rb:22:in `getvars'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:203:in `open_view'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `block in load_views'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `each'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:90:in `load_views'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:83:in `initialize'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:65:in `new'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/repo.rb:65:in `open'
	/Users/Hal/Dropbox/topx/git/scriptorium/lib/scriptorium/api.rb:23:in `open_repo'
	/Users/Hal/Dropbox/topx/git/scriptorium/ui/web/app/app.rb:36:in `block in <class:ScriptoriumWeb>'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1807:in `block in compile!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1123:in `block in process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1121:in `process_route'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1060:in `block in filter!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1059:in `each'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1059:in `filter!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1190:in `block in dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1188:in `dispatch!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `block in call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `catch'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1164:in `invoke'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1004:in `call!'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:993:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/xss_header.rb:20:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/path_traversal.rb:18:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/json_csrf.rb:28:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/base.rb:53:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-protection-4.1.1/lib/rack/protection/frame_options.rb:33:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/middleware/logger.rb:17:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/rack-3.1.16/lib/rack/head.rb:15:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:227:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:2138:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `block in call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1898:in `synchronize'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/sinatra-4.1.1/lib/sinatra/base.rb:1677:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/configuration.rb:279:in `call'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:99:in `block in handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:390:in `with_force_shutdown'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/request.rb:98:in `handle_request'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:472:in `process_client'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/server.rb:254:in `block in run'
	/Users/Hal/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/puma-6.6.0/lib/puma/thread_pool.rb:167:in `block in spawn_thread'
